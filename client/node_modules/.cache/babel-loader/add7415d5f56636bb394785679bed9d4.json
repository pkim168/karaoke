{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\karaoke\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js';\nimport { Toast } from 'react-bootstrap'; //Do i need to include this line in every file that uses socket even when ive passed through props?\n\nvar socketClient = require('socket.io-client');\n\nfunction App() {\n  _s();\n\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const [page, setPage] = useState(\"home\");\n  const [library, setLibrary] = useState({});\n  const [queue, setQueue] = useState([]);\n  const [play, setPlay] = useState(false);\n  const [stop, setStop] = useState(false);\n  const [song, setSong] = useState(\"\");\n  const [showProgress, setShowProgress] = useState(false);\n  const [progress, setProgress] = useState(\"\");\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [success, setSuccess] = useState(\"\");\n  const [showFailed, setShowFailed] = useState(false);\n  const [failed, setFailed] = useState(\"\");\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const path = useRef(\"\");\n\n  function addSong(song) {\n    console.log('Add Song');\n    socket.current.emit('addQueue', song);\n  }\n\n  function removeSong(index) {\n    console.log('Remove Song');\n    socket.current.emit('removeQueue', index);\n  }\n\n  function addLibrary(song) {\n    console.log('Add Library');\n    socket.current.emit('addLibrary', song);\n  }\n\n  function playSong() {\n    console.log('Play Song');\n    socket.current.emit('playSong');\n  }\n\n  function skipSong() {\n    console.log('Skip Song');\n    socket.current.emit('skipSong');\n  }\n\n  function stopSong() {\n    console.log('Stop Song');\n    socket.current.emit('stopSong');\n  }\n\n  function onSongEnd() {\n    console.log('On Song End');\n    socket.current.emit('songEnd');\n  }\n\n  function editLibrary(song) {\n    console.log('Edit Library');\n    socket.current.emit('editLibrary', song);\n  }\n\n  function deleteSong(song) {\n    console.log('Delete Song');\n    socket.current.emit('deleteSong', song);\n  }\n\n  function speed(direction, pbr) {\n    console.log('Speed ' + direction);\n    socket.current.emit('speed', direction, pbr);\n  }\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n      return;\n    }\n\n    socket.current = socketClient(ip + ':4000');\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n      path.current = 'http://' + ip + ':4000';\n      setPage(user);\n    });\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n    socket.current.on(\"connect_error\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"connect_timeout\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"library\", data => {\n      setLibrary(data);\n    });\n    socket.current.on(\"addProgress\", arr => {\n      console.log('addProgress');\n\n      if (arr[0] === 'start') {\n        setProgress(arr[1]);\n        setShowProgress(true);\n      } else if (arr[0] === 'end') {\n        setProgress(\"\");\n        setShowProgress(false);\n      }\n    });\n    socket.current.on(\"addSuccess\", msg => {\n      console.log('addSuccess');\n      setSuccess(msg);\n      setShowSuccess(true);\n    });\n    socket.current.on(\"addFail\", msg => {\n      console.log('addFail');\n      setFailed(msg);\n      setShowFailed(true);\n    });\n    socket.current.on(\"queue\", data => {\n      setQueue(data);\n    });\n    socket.current.on(\"play\", data => {\n      if (data) {\n        setPlay(true);\n        setStop(false);\n        console.log(path.current + \"/songs/\" + data['code']);\n        setSong(path.current + \"/songs/\" + data['code']);\n      } else {\n        setPlay(false);\n      }\n    });\n    socket.current.on(\"stop\", () => {\n      setSong(\"\");\n      setStop(true);\n      setPlay(false);\n    });\n    socket.current.on(\"speed\", (direction, pbr) => {\n      if (direction === 'up') {\n        setPlaybackRate(pbr + .25);\n      } else if (direction === 'down') {\n        setPlaybackRate(pbr - .25);\n      }\n    });\n  }\n\n  useEffect(() => {\n    return () => {\n      if (flag) socket.current.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [page === \"home\" && /*#__PURE__*/_jsxDEV(Home, {\n      connect: connect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 27\n    }, this), page === \"host\" && /*#__PURE__*/_jsxDEV(Host, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong,\n      play: play,\n      skipSong: skipSong,\n      playSong: playSong,\n      stopSong: stopSong,\n      addLibrary: addLibrary,\n      song: song,\n      onSongEnd: onSongEnd,\n      stop: stop,\n      editLibrary: editLibrary,\n      deleteSong: deleteSong,\n      playbackRate: playbackRate,\n      speed: speed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 27\n    }, this), page === \"user\" && /*#__PURE__*/_jsxDEV(User, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong,\n      play: play,\n      skipSong: skipSong,\n      playSong: playSong,\n      stopSong: stopSong,\n      addLibrary: addLibrary,\n      stop: stop,\n      playbackRate: playbackRate,\n      speed: speed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: 0,\n        right: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Toast, {\n        onClose: () => setShowProgress(false),\n        show: showProgress,\n        children: [/*#__PURE__*/_jsxDEV(Toast.Header, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"holder.js/20x20?text=%20\",\n            className: \"rounded mr-2\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"mr-auto\",\n            children: \"Downloading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Toast.Body, {\n          children: progress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Toast, {\n        onClose: () => setShowSuccess(false),\n        show: showSuccess,\n        delay: 3000,\n        autohide: true,\n        children: [/*#__PURE__*/_jsxDEV(Toast.Header, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"holder.js/20x20?text=%20\",\n            className: \"rounded mr-2\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"mr-auto\",\n            children: \"Song Addition Success\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Toast.Body, {\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Toast, {\n        onClose: () => setShowFailed(false),\n        show: showFailed,\n        delay: 3000,\n        autohide: true,\n        children: [/*#__PURE__*/_jsxDEV(Toast.Header, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"holder.js/20x20?text=%20\",\n            className: \"rounded mr-2\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"mr-auto\",\n            children: \"Song Addition Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Toast.Body, {\n          children: failed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"dBo0/yL2pESgl0vmhSEZHXdNgFM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Documents/GitHub/karaoke/client/src/App.js"],"names":["React","useRef","useState","useEffect","Home","Host","User","Toast","socketClient","require","App","socket","role","flag","page","setPage","library","setLibrary","queue","setQueue","play","setPlay","stop","setStop","song","setSong","showProgress","setShowProgress","progress","setProgress","showSuccess","setShowSuccess","success","setSuccess","showFailed","setShowFailed","failed","setFailed","playbackRate","setPlaybackRate","path","addSong","console","log","current","emit","removeSong","index","addLibrary","playSong","skipSong","stopSong","onSongEnd","editLibrary","deleteSong","speed","direction","pbr","connect","userType","ip","alert","on","user","id","close","error","data","arr","msg","position","bottom","right"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport Home from './components/Home.js';\r\nimport Host from './components/Host.js';\r\nimport User from './components/User.js';\r\nimport { Toast } from 'react-bootstrap';\r\n//Do i need to include this line in every file that uses socket even when ive passed through props?\r\nvar socketClient = require('socket.io-client');\r\n\r\nfunction App() {\r\n  const socket = useRef(null);\r\n  const role = useRef(null);\r\n  const flag = useRef(true);\r\n  const [page, setPage] = useState(\"home\");\r\n  const [library, setLibrary] = useState({});\r\n  const [queue, setQueue] = useState([]);\r\n  const [play, setPlay] = useState(false);\r\n  const [stop, setStop] = useState(false);\r\n  const [song, setSong] = useState(\"\");\r\n  const [showProgress, setShowProgress] = useState(false);\r\n  const [progress, setProgress] = useState(\"\");\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [showFailed, setShowFailed] = useState(false);\r\n  const [failed, setFailed] = useState(\"\");\r\n  const [playbackRate, setPlaybackRate] = useState(1);\r\n  const path = useRef(\"\");\r\n\r\n  function addSong(song) {\r\n    console.log('Add Song');\r\n    socket.current.emit('addQueue', song);\r\n  }\r\n\r\n  function removeSong(index) {\r\n    console.log('Remove Song');\r\n    socket.current.emit('removeQueue', index);\r\n  }\r\n\r\n  function addLibrary(song) {\r\n    console.log('Add Library');\r\n    socket.current.emit('addLibrary', song);\r\n  }\r\n\r\n  function playSong() {\r\n    console.log('Play Song');\r\n    socket.current.emit('playSong');\r\n  }\r\n\r\n  function skipSong() {\r\n    console.log('Skip Song');\r\n    socket.current.emit('skipSong')\r\n  }\r\n\r\n  function stopSong() {\r\n    console.log('Stop Song');\r\n    socket.current.emit('stopSong');\r\n  }\r\n\r\n  function onSongEnd() {\r\n    console.log('On Song End');\r\n    socket.current.emit('songEnd');\r\n  }\r\n\r\n  function editLibrary(song) {\r\n    console.log('Edit Library');\r\n    socket.current.emit('editLibrary', song);\r\n  }\r\n\r\n  function deleteSong(song) {\r\n    console.log('Delete Song');\r\n    socket.current.emit('deleteSong', song);\r\n  }\r\n\r\n  function speed(direction, pbr) {\r\n    console.log('Speed ' + direction)\r\n    socket.current.emit('speed', direction, pbr);\r\n  }\r\n  \r\n  function connect(userType, ip) {\r\n    if (!ip) {\r\n      alert(\"IP address is needed\");\r\n      return;\r\n    }\r\n    socket.current = socketClient(ip+':4000');\r\n\r\n    socket.current.on(\"connection\", user => {\r\n      role.current = user;\r\n      console.log(role.current);\r\n      console.log(socket.current.id);\r\n      path.current = 'http://'+ip+':4000';\r\n      setPage(user);\r\n    });\r\n\r\n    socket.current.on(\"close\", () => {\r\n      flag.current = false;\r\n      socket.current.close();\r\n      console.log(\"Disconnected from server\");\r\n    });\r\n\r\n    socket.current.on(\"connect_error\", (error) => {\r\n      socket.current.close();\r\n      alert(\"Host not available\");\r\n      return;\r\n    });\r\n\r\n    socket.current.on(\"connect_timeout\", (error) => {\r\n      socket.current.close();\r\n      alert(\"Host not available\");\r\n      return;\r\n    });\r\n\r\n    socket.current.on(\"library\", (data) => {\r\n      setLibrary(data);\r\n    })\r\n\r\n    socket.current.on(\"addProgress\", (arr) => {\r\n      console.log('addProgress');\r\n      if (arr[0] === 'start') {\r\n        setProgress(arr[1]);\r\n        setShowProgress(true);\r\n      }\r\n      else if(arr[0] === 'end') {\r\n        setProgress(\"\");\r\n        setShowProgress(false);\r\n      }\r\n    });\r\n\r\n    socket.current.on(\"addSuccess\", (msg) => {\r\n      console.log('addSuccess');\r\n      setSuccess(msg);\r\n      setShowSuccess(true);\r\n    });\r\n\r\n    socket.current.on(\"addFail\", (msg) => {\r\n      console.log('addFail');\r\n      setFailed(msg);\r\n      setShowFailed(true);\r\n    });\r\n\r\n    socket.current.on(\"queue\", (data) => {\r\n      setQueue(data);\r\n    });\r\n\r\n    socket.current.on(\"play\", (data) => {\r\n      if (data) {\r\n        setPlay(true);\r\n        setStop(false);\r\n        console.log(path.current+\"/songs/\"+data['code']);\r\n        setSong(path.current+\"/songs/\"+data['code']);\r\n      }\r\n      else {\r\n        setPlay(false);\r\n      }\r\n    });\r\n\r\n    socket.current.on(\"stop\", () => {\r\n      setSong(\"\");\r\n      setStop(true);\r\n      setPlay(false);\r\n    })\r\n\r\n    socket.current.on(\"speed\", (direction, pbr) =>\r\n    {\r\n      if (direction === 'up') {\r\n        setPlaybackRate(pbr + .25);\r\n      }\r\n      else if (direction === 'down') {\r\n        setPlaybackRate(pbr - .25);\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (flag)\r\n        socket.current.close();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {page === \"home\" && <Home connect={connect} />}\r\n      {page === \"host\" && <Host socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} play={play} skipSong={skipSong} playSong={playSong} stopSong={stopSong} addLibrary={addLibrary} song={song} onSongEnd={onSongEnd} stop={stop} editLibrary={editLibrary} deleteSong={deleteSong} playbackRate={playbackRate} speed={speed} />}\r\n      {page === \"user\" && <User socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} play={play} skipSong={skipSong} playSong={playSong} stopSong={stopSong} addLibrary={addLibrary} stop={stop} playbackRate={playbackRate} speed={speed} />}\r\n      <div style={{ position: 'absolute', bottom: 0, right: 0 }} >\r\n        <Toast onClose={() => setShowProgress(false)} show={showProgress}>\r\n          <Toast.Header>\r\n            <img src=\"holder.js/20x20?text=%20\" className=\"rounded mr-2\" alt=\"\" />\r\n            <strong className=\"mr-auto\">Downloading...</strong>\r\n          </Toast.Header>\r\n          <Toast.Body>{progress}</Toast.Body>\r\n        </Toast>\r\n        <Toast onClose={() => setShowSuccess(false)} show={showSuccess} delay={3000} autohide >\r\n          <Toast.Header>\r\n            <img src=\"holder.js/20x20?text=%20\" className=\"rounded mr-2\" alt=\"\" />\r\n            <strong className=\"mr-auto\">Song Addition Success</strong>\r\n          </Toast.Header>\r\n          <Toast.Body>{success}</Toast.Body>\r\n        </Toast>\r\n        <Toast onClose={() => setShowFailed(false)} show={showFailed} delay={3000} autohide >\r\n          <Toast.Header>\r\n            <img src=\"holder.js/20x20?text=%20\" className=\"rounded mr-2\" alt=\"\" />\r\n            <strong className=\"mr-auto\">Song Addition Failed</strong>\r\n          </Toast.Header>\r\n          <Toast.Body>{failed}</Toast.Body>\r\n        </Toast>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}