{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\karaoke\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js'; //Do i need to include this line in every file that uses socket even when ive passed through props?\n\nvar socketClient = require('socket.io-client');\n\nfunction App() {\n  _s();\n\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const [page, setPage] = useState(\"home\");\n  const [library, setLibrary] = useState({});\n  const [queue, setQueue] = useState([]);\n  console.log(queue);\n\n  function addSong(song) {\n    console.log('Add Song');\n    setQueue(queue => [...queue, song]);\n  }\n\n  function removeSong(index) {\n    console.log('Remove Song');\n    let temp = [...queue];\n    temp.splice(index, 1);\n    setQueue(queue => temp);\n  }\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n      return;\n    }\n\n    socket.current = socketClient(ip + ':4000');\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n      setPage(userType);\n    });\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n    socket.current.on(\"connect_error\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"connect_timeout\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"library\", data => {\n      setLibrary(data);\n    });\n  }\n\n  useEffect(() => {\n    return () => {\n      if (flag) socket.current.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [page === \"home\" && /*#__PURE__*/_jsxDEV(Home, {\n      connect: connect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 27\n    }, this), page === \"host\" && /*#__PURE__*/_jsxDEV(Host, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }, this), page === \"user\" && /*#__PURE__*/_jsxDEV(User, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"zNb3tcKv//3h73FwBA3vL6GnlVA=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Documents/GitHub/karaoke/client/src/App.js"],"names":["React","useRef","useState","useEffect","Home","Host","User","socketClient","require","App","socket","role","flag","page","setPage","library","setLibrary","queue","setQueue","console","log","addSong","song","removeSong","index","temp","splice","connect","userType","ip","alert","current","on","user","id","close","error","data"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js';\n//Do i need to include this line in every file that uses socket even when ive passed through props?\nvar socketClient = require('socket.io-client');\n\nfunction App() {\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const [page, setPage] = useState(\"home\");\n  const [library, setLibrary] = useState({});\n  const [queue, setQueue] = useState([]);\n\n  console.log(queue);\n  function addSong(song) {\n    console.log('Add Song');\n    setQueue(queue => [...queue, song]);\n  }\n\n  function removeSong(index) {\n    console.log('Remove Song');\n    let temp = [...queue];\n    temp.splice(index, 1);\n    setQueue(queue => temp);\n  }\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n      return;\n    }\n    socket.current = socketClient(ip+':4000');\n\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n      setPage(userType);\n    });\n\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n\n    socket.current.on(\"connect_error\", (error) => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n\n    socket.current.on(\"connect_timeout\", (error) => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n\n    socket.current.on(\"library\", (data) => {\n      setLibrary(data);\n    })\n  }\n\n  useEffect(() => {\n    return () => {\n      if (flag)\n        socket.current.close();\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {page === \"home\" && <Home connect={connect} />}\n      {page === \"host\" && <Host socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} />}\n      {page === \"user\" && <User socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} />}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}