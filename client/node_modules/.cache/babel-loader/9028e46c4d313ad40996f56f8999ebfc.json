{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\karaoke\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport '../node_modules/bootstrap/dist/js/bootstrap.min.js';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { Container, Row, Col, Button, Tab, Nav, InputGroup, FormControl } from 'react-bootstrap';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js'; //Do i need to include this line in every file that uses socket even when ive passed through props?\n\nvar socketClient = require('socket.io-client');\n\nfunction App() {\n  _s();\n\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const page = useRef(\"home\");\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n    }\n\n    socket.current = socketClient(ip + ':4000'); // if user: use hostIP:4000\n\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n    });\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n    page.current = userType;\n    return () => {\n      if (flag) socket.current.close();\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [page.current === \"home\" && /*#__PURE__*/_jsxDEV(Home, {\n      connect: connect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 35\n    }, this), page.current === \"host\" && /*#__PURE__*/_jsxDEV(Host, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 35\n    }, this), page.current === \"user\" && /*#__PURE__*/_jsxDEV(User, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 35\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"RwGZSNYG6dWCzhgUoxjfCWjA3WU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Documents/GitHub/karaoke/client/src/App.js"],"names":["React","useRef","useState","useEffect","Container","Row","Col","Button","Tab","Nav","InputGroup","FormControl","Home","Host","User","socketClient","require","App","socket","role","flag","page","connect","userType","ip","alert","current","on","user","console","log","id","close"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAO,oDAAP;AACA,OAAO,sDAAP;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,MAA9B,EAAsCC,GAAtC,EAA2CC,GAA3C,EAAgDC,UAAhD,EAA4DC,WAA5D,QAA8E,iBAA9E;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,IAAP,MAAiB,sBAAjB,C,CACA;;AACA,IAAIC,YAAY,GAAGC,OAAO,CAAC,kBAAD,CAA1B;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAMC,MAAM,GAAGjB,MAAM,CAAC,IAAD,CAArB;AACA,QAAMkB,IAAI,GAAGlB,MAAM,CAAC,IAAD,CAAnB;AACA,QAAMmB,IAAI,GAAGnB,MAAM,CAAC,IAAD,CAAnB;AACA,QAAMoB,IAAI,GAAGpB,MAAM,CAAC,MAAD,CAAnB;;AAEA,WAASqB,OAAT,CAAiBC,QAAjB,EAA2BC,EAA3B,EAA+B;AAC7B,QAAI,CAACA,EAAL,EAAS;AACPC,MAAAA,KAAK,CAAC,sBAAD,CAAL;AACD;;AACDP,IAAAA,MAAM,CAACQ,OAAP,GAAiBX,YAAY,CAACS,EAAE,GAAC,OAAJ,CAA7B,CAJ6B,CAK7B;;AACAN,IAAAA,MAAM,CAACQ,OAAP,CAAeC,EAAf,CAAkB,YAAlB,EAAgCC,IAAI,IAAI;AACtCT,MAAAA,IAAI,CAACO,OAAL,GAAeE,IAAf;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYX,IAAI,CAACO,OAAjB;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYZ,MAAM,CAACQ,OAAP,CAAeK,EAA3B;AACD,KAJD;AAKAb,IAAAA,MAAM,CAACQ,OAAP,CAAeC,EAAf,CAAkB,OAAlB,EAA2B,MAAM;AAC/BP,MAAAA,IAAI,CAACM,OAAL,GAAe,KAAf;AACAR,MAAAA,MAAM,CAACQ,OAAP,CAAeM,KAAf;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACD,KAJD;AAMAT,IAAAA,IAAI,CAACK,OAAL,GAAeH,QAAf;AAEA,WAAO,MAAM;AACX,UAAIH,IAAJ,EACEF,MAAM,CAACQ,OAAP,CAAeM,KAAf;AACH,KAHD;AAID;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,eACGX,IAAI,CAACK,OAAL,KAAiB,MAAjB,iBAA2B,QAAC,IAAD;AAAM,MAAA,OAAO,EAAEJ;AAAf;AAAA;AAAA;AAAA;AAAA,YAD9B,EAEGD,IAAI,CAACK,OAAL,KAAiB,MAAjB,iBAA2B,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,YAF9B,EAGGL,IAAI,CAACK,OAAL,KAAiB,MAAjB,iBAA2B,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,YAH9B;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAOD;;GAtCQT,G;;KAAAA,G;AAwCT,eAAeA,GAAf","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport '../node_modules/bootstrap/dist/js/bootstrap.min.js';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { Container, Row, Col, Button, Tab, Nav, InputGroup, FormControl} from 'react-bootstrap';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js';\n//Do i need to include this line in every file that uses socket even when ive passed through props?\nvar socketClient = require('socket.io-client');\n\nfunction App() {\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const page = useRef(\"home\");\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n    }\n    socket.current = socketClient(ip+':4000');\n    // if user: use hostIP:4000\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n    })\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    })\n\n    page.current = userType;\n\n    return () => {\n      if (flag)\n        socket.current.close();\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      {page.current === \"home\" && <Home connect={connect}/>}\n      {page.current === \"host\" && <Host/>}\n      {page.current === \"user\" && <User/>}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}