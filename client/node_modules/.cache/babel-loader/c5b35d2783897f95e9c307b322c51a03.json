{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\karaoke\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js'; //Do i need to include this line in every file that uses socket even when ive passed through props?\n\nvar socketClient = require('socket.io-client');\n\nconst {\n  join\n} = require('path');\n\nfunction App() {\n  _s();\n\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const [page, setPage] = useState(\"home\");\n  const [library, setLibrary] = useState({});\n  const [queue, setQueue] = useState([]);\n  const [play, setPlay] = useState(false);\n  const [song, setSong] = useState(\"\");\n  const [stop, setStop] = useState(false);\n  const path = useRef(\"\");\n  const ipAddress = useRef(\"\");\n\n  const internalIp = require('internal-ip');\n\n  ipAddress.current = getIP();\n\n  async function getIP() {\n    return await internalIp.v4();\n  }\n\n  ; // console.log(queue);\n  // function addSong(song) {\n  //   console.log('Add Song');\n  //   socket.emit('addQueue', song);\n  //   setQueue(queue => [...queue, song]);\n  // }\n\n  function addSong(song) {\n    console.log('Add Song');\n    socket.current.emit('addQueue', song);\n  }\n\n  function removeSong(index) {\n    console.log('Remove Song');\n    socket.current.emit('removeQueue', index);\n  }\n\n  function addLibrary(song) {\n    console.log('Add Library');\n    socket.current.emit('addLibrary', song);\n  }\n\n  function playSong() {\n    console.log('Play Song');\n    socket.current.emit('playSong');\n  }\n\n  function skipSong() {\n    console.log('Skip Song');\n    socket.current.emit('skipSong');\n  }\n\n  function stopSong() {\n    console.log('Stop Song');\n    socket.current.emit('stopSong');\n  }\n\n  function onSongEnd() {\n    console.log('On Song End');\n    socket.current.emit('songEnd');\n  }\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n      return;\n    }\n\n    socket.current = socketClient(ip + ':4000');\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n      path.current = 'http://' + ip + ':4000';\n      setPage(userType);\n    });\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n    socket.current.on(\"connect_error\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"connect_timeout\", error => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n    socket.current.on(\"library\", data => {\n      setLibrary(data);\n    });\n    socket.current.on(\"queue\", data => {\n      setQueue(data);\n    });\n    socket.current.on(\"play\", data => {\n      if (data) {\n        setPlay(true);\n        setStop(false);\n        console.log(path.current + \"/songs/\" + data['code']);\n        setSong(path.current + \"/songs/\" + data['code']);\n      } else {\n        setPlay(false);\n      }\n    });\n    socket.current.on(\"stop\", () => {\n      setStop(true);\n      setPlay(false);\n    });\n  }\n\n  useEffect(() => {\n    return () => {\n      if (flag) socket.current.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [page === \"home\" && /*#__PURE__*/_jsxDEV(Home, {\n      connect: connect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 27\n    }, this), page === \"host\" && /*#__PURE__*/_jsxDEV(Host, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong,\n      play: play,\n      skipSong: skipSong,\n      playSong: playSong,\n      stopSong: stopSong,\n      addLibrary: addLibrary,\n      song: song,\n      onSongEnd: onSongEnd,\n      ipAddress: ipAddress.current\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 27\n    }, this), page === \"user\" && /*#__PURE__*/_jsxDEV(User, {\n      socket: socket.current,\n      library: library,\n      queue: queue,\n      addSong: addSong,\n      removeSong: removeSong,\n      play: play,\n      skipSong: skipSong,\n      playSong: playSong,\n      stopSong: stopSong,\n      addLibrary: addLibrary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"xo31vhqTZ9XztScx6b9/GefC6I4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["D:/Documents/GitHub/karaoke/client/src/App.js"],"names":["React","useRef","useState","useEffect","Home","Host","User","socketClient","require","join","App","socket","role","flag","page","setPage","library","setLibrary","queue","setQueue","play","setPlay","song","setSong","stop","setStop","path","ipAddress","internalIp","current","getIP","v4","addSong","console","log","emit","removeSong","index","addLibrary","playSong","skipSong","stopSong","onSongEnd","connect","userType","ip","alert","on","user","id","close","error","data"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Home from './components/Home.js';\nimport Host from './components/Host.js';\nimport User from './components/User.js';\n//Do i need to include this line in every file that uses socket even when ive passed through props?\nvar socketClient = require('socket.io-client');\nconst {join} = require('path');\n\nfunction App() {\n  const socket = useRef(null);\n  const role = useRef(null);\n  const flag = useRef(true);\n  const [page, setPage] = useState(\"home\");\n  const [library, setLibrary] = useState({});\n  const [queue, setQueue] = useState([]);\n  const [play, setPlay] = useState(false);\n  const [song, setSong] = useState(\"\");\n  const [stop, setStop] = useState(false);\n  const path = useRef(\"\");\n  const ipAddress = useRef(\"\");\n\n  const internalIp = require('internal-ip');\n\n  ipAddress.current = getIP();\n  async function getIP() {\n    return (await internalIp.v4());\n  };\n\n  // console.log(queue);\n  // function addSong(song) {\n  //   console.log('Add Song');\n  //   socket.emit('addQueue', song);\n  //   setQueue(queue => [...queue, song]);\n  // }\n  function addSong(song) {\n    console.log('Add Song');\n    socket.current.emit('addQueue', song);\n  }\n\n  function removeSong(index) {\n    console.log('Remove Song');\n    socket.current.emit('removeQueue', index);\n  }\n\n  function addLibrary(song) {\n    console.log('Add Library');\n    socket.current.emit('addLibrary', song);\n  }\n\n  function playSong() {\n    console.log('Play Song');\n    socket.current.emit('playSong');\n  }\n\n  function skipSong() {\n    console.log('Skip Song');\n    socket.current.emit('skipSong')\n  }\n\n  function stopSong() {\n    console.log('Stop Song');\n    socket.current.emit('stopSong');\n  }\n\n  function onSongEnd() {\n    console.log('On Song End');\n    socket.current.emit('songEnd');\n  }\n\n  function connect(userType, ip) {\n    if (!ip) {\n      alert(\"IP address is needed\");\n      return;\n    }\n    socket.current = socketClient(ip+':4000');\n\n    socket.current.on(\"connection\", user => {\n      role.current = user;\n      console.log(role.current);\n      console.log(socket.current.id);\n      path.current = 'http://'+ip+':4000';\n      setPage(userType);\n    });\n\n    socket.current.on(\"close\", () => {\n      flag.current = false;\n      socket.current.close();\n      console.log(\"Disconnected from server\");\n    });\n\n    socket.current.on(\"connect_error\", (error) => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n\n    socket.current.on(\"connect_timeout\", (error) => {\n      socket.current.close();\n      alert(\"Host not available\");\n      return;\n    });\n\n    socket.current.on(\"library\", (data) => {\n      setLibrary(data);\n    })\n\n    socket.current.on(\"queue\", (data) => {\n      setQueue(data);\n    });\n\n    socket.current.on(\"play\", (data) => {\n      if (data) {\n        setPlay(true);\n        setStop(false);\n        console.log(path.current+\"/songs/\"+data['code']);\n        setSong(path.current+\"/songs/\"+data['code']);\n      }\n      else {\n        setPlay(false);\n      }\n    });\n\n    socket.current.on(\"stop\", () => {\n      setStop(true);\n      setPlay(false);\n    })\n  }\n\n  useEffect(() => {\n    return () => {\n      if (flag)\n        socket.current.close();\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {page === \"home\" && <Home connect={connect} />}\n      {page === \"host\" && <Host socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} play={play} skipSong={skipSong} playSong={playSong} stopSong={stopSong} addLibrary={addLibrary} song={song} onSongEnd={onSongEnd} ipAddress={ipAddress.current} />}\n      {page === \"user\" && <User socket={socket.current} library={library} queue={queue} addSong={addSong} removeSong={removeSong} play={play} skipSong={skipSong} playSong={playSong} stopSong={stopSong} addLibrary={addLibrary} />}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}